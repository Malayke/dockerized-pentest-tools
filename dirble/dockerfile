FROM messense/rust-musl-cross:x86_64-musl
COPY dirble /dirble
WORKDIR /dirble
RUN cargo build --release --features vendored

FROM alpine:latest
COPY --from=0 /dirble/target/x86_64-unknown-linux-musl/release/dirble /home/dirble/dirble
COPY --from=0 /dirble/dirble_wordlist.txt /home/dirble
COPY --from=0 /dirble/extensions/* /home/dirble/extensions/
WORKDIR /home/dirble
ENTRYPOINT ["./dirble"]